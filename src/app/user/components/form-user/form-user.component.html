<div class="container">
  <div class="row">
    <div class="col-12">
      <form [formGroup]="userForm" autocomplete="off">
        <div class="row">
          <div class="col-12 text-end">
            <button (click)="delete()" *ngIf="user" class="btn btn-outline-danger">Eliminar Usuario</button>
          </div>
          <div class="col-6 mt-4">
            <label for="name" class="form-label text-white">Nombre <span>*</span></label>
            <input formControlName="name" type="text" class="form-control" id="name" placeholder="Nombre">
            <div class="text-danger" *ngIf="userForm.get('name')?.getError('required') && userForm.get('name')?.touched">
              El campo Nombre es requerido
            </div>
          </div>
          <div class="col-6 mt-4">
            <label for="lastname" class="form-label text-white">Apellidos <span>*</span></label>
            <input formControlName="lastname" type="text" class="form-control" id="lastname" placeholder="Apellidos">
            <div class="text-danger" *ngIf="userForm.get('lastname')?.getError('required') && userForm.get('lastname')?.touched">
              El campo Apellidos es requerido
            </div>
          </div>
          <div class="col-6 mt-4">
            <label for="user" class="form-label text-white">Usuario <span>*</span></label>
            <input formControlName="username" type="text" class="form-control" id="user" placeholder="Usuario">
            <div class="text-danger" *ngIf="userForm.get('username')?.getError('required') && userForm.get('username')?.touched">
              El campo Usuario es requerido
            </div>
          </div>
          <div class="col-6 mt-4">
            <label for="email" class="form-label text-white">Correo <span>*</span></label>
            <input formControlName="email" type="email" class="form-control" id="email" placeholder="Correo">
            <div class="text-danger" *ngIf="userForm.get('email')?.getError('required') && userForm.get('email')?.touched">
              El campo Correo es requerido
            </div>
          </div>
          <div *ngIf="(userForm.get('changePassword')?.value && user) || !user" class="col-6 mt-4">
            <label for="password1" class="form-label text-white">Contraseña <span>*</span></label>
            <input formControlName="password1" type="password" class="form-control" id="password1" placeholder="Contraseña">
            <div class="text-danger" *ngIf="userForm.get('password1')?.getError('required') && userForm.get('password1')?.touched">
              El campo contraseña es oblogatorio
            </div>
            <div class="text-danger" *ngIf="userForm.get('password1')?.getError('minlength') && userForm.get('password1')?.touched">
              La contraseña debe tener 10 caracteres como mínimo
            </div>
            <div class="text-danger" *ngIf="userForm.get('password1')?.getError('notwhiteSpaces')">
              No debe colocar espacios en blanco en la contraseña
            </div>
            <div class="text-danger" *ngIf="userForm.get('password1')?.getError('notValidPassword') && userForm.get('password1')?.touched">
              La contraseña debe tener como mínimo: 1 número, 1 letra mayúscula y un caracter especial
            </div>
          </div>
          <div *ngIf="(userForm.get('changePassword')?.value && user) || !user" class="col-6 mt-4">
            <label for="password2" class="form-label text-white">Repetir contraseña</label>
            <input formControlName="password2" type="password" class="form-control" id="password2" placeholder="Repita la contraseña">
            <div class="text-danger" *ngIf="userForm?.getError('notSameValues') && userForm.get('password2')?.touched && userForm.get('password1')?.valid">
              Las contraseñas deben ser iguales
            </div>
          </div>
          <div class="col-6 mt-4">
            <label class="form-label text-white">Roles</label>

            <div class="form-check">
              <input value="Admin" formControlName="rol" class="form-check-input" type="radio" name="rol" id="flexRadioDefault1">
              <label class="form-check-label" for="flexRadioDefault1">
                Admin
              </label>

            </div>
            <div class="form-check">
              <input value="User" formControlName="rol" class="form-check-input" type="radio" name="rol" id="flexRadioDefault2" checked>
              <label class="form-check-label" for="flexRadioDefault2">
                User
              </label>
            </div>

          </div>
          <div class="col-12 text-center">
            <div *ngIf="user" class="form-check form-check-inline">
              <input formControlName="changePassword" class="form-check-input" type="checkbox" id="changePassword">
              <label class="form-check-label text-white" for="changePassword">
                Cambiar contraseña
              </label>
            </div>
          </div>
          <div class="col-12 text-center">
            <button [disabled]="!validForm()" (click)="save()" class="btn btn-secondary mx-5 my-5">Aceptar</button>
            <button (click)="close()" class="btn btn-grey mx-2">Cancelar</button>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>
